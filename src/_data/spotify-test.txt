const EleventyFetch = require('@11ty/eleventy-fetch');

// auth

const SPOTIFY_CLIENT_TOKEN = require('#datajs/spotify_token-test');

const auth_code = SPOTIFY_CLIENT_TOKEN();
console.log(auth_code);
module.exports = async function () {
  const playlist = '3cEYpjA9oz9GiPac4AsH4n';
  const url = `https://api.spotify.com/v1/playlists/${playlist}`;
  const res = await EleventyFetch(url, {
    duration: '1h',
    directory: '.cache/eleventy-fetch/',
    type: 'json',
    fetchOptions: {
      headers: {
        Authorization: `Bearer ${auth_code}`
      }
    }
  }).catch();
  const data = await res;
  return data;
};
